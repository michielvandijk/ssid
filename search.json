[{"path":"https://michielvandijk.github.io/ssid/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 ssid authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":[]},{"path":"https://michielvandijk.github.io/ssid/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Michiel Van Dijk. Author, maintainer.","code":""},{"path":"https://michielvandijk.github.io/ssid/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Van Dijk M (2024). ssid: Spatial Simulation Income Dynamics model. R package version 0.0.0.9000, https://michielvandijk.github.io/ssid/, https://github.com/michielvandijk/ssid.","code":"@Manual{,   title = {ssid: Spatial Simulation of Income Dynamics model},   author = {Michiel {Van Dijk}},   year = {2024},   note = {R package version 0.0.0.9000,     https://michielvandijk.github.io/ssid/},   url = {https://github.com/michielvandijk/ssid}, }"},{"path":"https://michielvandijk.github.io/ssid/index.html","id":"ssid","dir":"","previous_headings":"","what":"Spatial Simulation of Income Dynamics model","title":"Spatial Simulation of Income Dynamics model","text":"ssid package contains functions run dynamic spatial microsimulation model provides income poverty projections subnational scale. uses spatial microsimulation approach, derive indicators fine spatial resolution (e.g. districts municipalities) combining socio-economic data household survey (referred ‘seed’), aggregated information population characteristics (referred ‘benchmark’) available small geographical areas population census sources. algorithm used reweigh seed match benchmark information derive representative small area statistics, case income poverty indicators. dynamic spatial microsimulation approaches, benchmark projected forward new weights computed future periods obtain trends income distribution different scenarios.","code":""},{"path":"https://michielvandijk.github.io/ssid/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Spatial Simulation of Income Dynamics model","text":"can install development version ssid GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"michielvandijk/ssid\")"},{"path":"https://michielvandijk.github.io/ssid/reference/adjust_factor.html","id":null,"dir":"Reference","previous_headings":"","what":"Applies an importance weight to an ipfr factor — adjust_factor","title":"Applies an importance weight to an ipfr factor — adjust_factor","text":"lower values importance, factor moved closer 1.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/adjust_factor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Applies an importance weight to an ipfr factor — adjust_factor","text":"","code":"adjust_factor(factor, importance)"},{"path":"https://michielvandijk.github.io/ssid/reference/adjust_factor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Applies an importance weight to an ipfr factor — adjust_factor","text":"factor correction factor calculated using target/current. importance real 0 1 signifying importance factor. importance 1 modify factor. importance 0.5 shrink factor closer 1.0 50 percent.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/adjust_factor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Applies an importance weight to an ipfr factor — adjust_factor","text":"adjusted factor.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/aggregate2adm.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate raster files to adm level — aggregate2adm","title":"Aggregate raster files to adm level — aggregate2adm","text":"Function aggregate raster files adm level.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/aggregate2adm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate raster files to adm level — aggregate2adm","text":"","code":"aggregate2adm(r, adm)"},{"path":"https://michielvandijk.github.io/ssid/reference/aggregate2adm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate raster files to adm level — aggregate2adm","text":"r Object class SpatRaster Raster adm_file Object class sf location subnational administrative units","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/align_raster.html","id":null,"dir":"Reference","previous_headings":"","what":"Both clips a raster to polygon and aligns it to reference grid — align_raster","title":"Both clips a raster to polygon and aligns it to reference grid — align_raster","text":"align_raster() uses polygon country clip raster aligns raster country grid created create_grid(). Aligning implies resulting map dimensions, resolution, extent projection country grid, therefore can stacked combined spatial data.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/align_raster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Both clips a raster to polygon and aligns it to reference grid — align_raster","text":"","code":"align_raster(r, ref_grid, poly, method = \"bilinear\")"},{"path":"https://michielvandijk.github.io/ssid/reference/align_raster.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Both clips a raster to polygon and aligns it to reference grid — align_raster","text":"r SpatRaster location SpatRaster processed ref_grid SpatRaster location SpatRaster geometry r resampled poly SpatVector sf object used clip r method character. Method used estimating new cell values. See terra::resample() options.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/align_raster.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Both clips a raster to polygon and aligns it to reference grid — align_raster","text":"selected method depends resolution. case input maps lower similar resolution model resolution, method = \"bilinear\" recommended. case input maps higher resolution, method = \"sum\" method = \"average\" recommended, depending type data processed. Note input maps resampled target resolution clipped polygon. way edges resulting raster detailed clipping low-resolution map.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/align_raster.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Both clips a raster to polygon and aligns it to reference grid — align_raster","text":"","code":"if (FALSE) { # \\dontrun{ align_raster(travel_time, grid, adm_map, method = \"bilinear\") } # }"},{"path":"https://michielvandijk.github.io/ssid/reference/balance_secondary_targets.html","id":null,"dir":"Reference","previous_headings":"","what":"Balances secondary targets to primary — balance_secondary_targets","title":"Balances secondary targets to primary — balance_secondary_targets","text":"average weight per record needed satisfy targets computed primary secondary targets. Often, can different, leads poor performance. algorithm must use extremely large small weights match competing goals. secondary targets scaled consistent primary targets measurement.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/balance_secondary_targets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Balances secondary targets to primary — balance_secondary_targets","text":"","code":"balance_secondary_targets(   primary_targets,   primary_seed,   secondary_targets,   secondary_seed,   secondary_importance,   primary_id )"},{"path":"https://michielvandijk.github.io/ssid/reference/balance_secondary_targets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Balances secondary targets to primary — balance_secondary_targets","text":"named list secondary targets","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/balance_secondary_targets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Balances secondary targets to primary — balance_secondary_targets","text":"multiple geographies present secondary_target table, balancing done geography separately.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_geo_fields.html","id":null,"dir":"Reference","previous_headings":"","what":"Check geo fields — check_geo_fields","title":"Check geo fields — check_geo_fields","text":"Helper function check_tables. Makes sure geographies seed target table line properly.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_geo_fields.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check geo fields — check_geo_fields","text":"","code":"check_geo_fields(seed, target, target_name)"},{"path":"https://michielvandijk.github.io/ssid/reference/check_geo_fields.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check geo fields — check_geo_fields","text":"seed seed table check target data.frame single target table target_name name target (e.g. size)","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_geo_fields.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check geo fields — check_geo_fields","text":"seed target table (may modified)","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_missing_categories.html","id":null,"dir":"Reference","previous_headings":"","what":"Check for missing categories in seed — check_missing_categories","title":"Check for missing categories in seed — check_missing_categories","text":"Helper function check_tables.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_missing_categories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check for missing categories in seed — check_missing_categories","text":"","code":"check_missing_categories(seed, target, target_name, geo_colname)"},{"path":"https://michielvandijk.github.io/ssid/reference/check_missing_categories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check for missing categories in seed — check_missing_categories","text":"seed seed table check target data.frame single target table target_name name target (e.g. size) geo_colname name geo column seed target (e.g. geo_taz)","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_missing_categories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check for missing categories in seed — check_missing_categories","text":"Nothing. Throws error one found.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"Check seed and target tables for completeness — check_tables","title":"Check seed and target tables for completeness — check_tables","text":"Given seed targets, checks make sure least one observation marginal category exists seed table.  Otherwise, ipf/ipu produce wrong answers without throwing errors.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/check_tables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check seed and target tables for completeness — check_tables","text":"","code":"check_tables(   primary_seed,   primary_targets,   secondary_seed = NULL,   secondary_targets = NULL,   primary_id )"},{"path":"https://michielvandijk.github.io/ssid/reference/check_tables.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check seed and target tables for completeness — check_tables","text":"seed tables target lists","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/clip_country.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to clip national maps from global WorldPop sex and age disaggregated population maps — clip_country","title":"Function to clip national maps from global WorldPop sex and age disaggregated population maps — clip_country","text":"Function clip national maps global WorldPop sex age disaggregated population maps","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/clip_country.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to clip national maps from global WorldPop sex and age disaggregated population maps — clip_country","text":"","code":"clip_country(r, adm)"},{"path":"https://michielvandijk.github.io/ssid/reference/clip_country.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to clip national maps from global WorldPop sex and age disaggregated population maps — clip_country","text":"r Object class SpatRaster, Raster path adm object class sf location subnational units","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/compare_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare results to targets — compare_results","title":"Compare results to targets — compare_results","text":"Compare results targets","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/compare_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare results to targets — compare_results","text":"","code":"compare_results(seed, targets)"},{"path":"https://michielvandijk.github.io/ssid/reference/compare_results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare results to targets — compare_results","text":"seed data.frame Seed table weight column format required ipu(). targets named list data.frames format required ipu().","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/compare_results.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare results to targets — compare_results","text":"data frame comparing balanced results targets","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/create_folders.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates ssid folder structure — create_folders","title":"Creates ssid folder structure — create_folders","text":"create_folders creates folder structure needed store processed data ssid.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/create_folders.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates ssid folder structure — create_folders","text":"","code":"create_folders(param = NULL)"},{"path":"https://michielvandijk.github.io/ssid/reference/create_folders.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates ssid folder structure — create_folders","text":"param Object type ssid_par bundles ssid parameters, including core model folders, alpha-3 country code year administrative unit level model solved type model.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/create_folders.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates ssid folder structure — create_folders","text":"create_folders creates two folders model_path, set user: mappings processed_data (including subfolders). copies number cvs files mappings folder, contain several data tables needed run model , needed can adjusted user.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/create_folders.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates ssid folder structure — create_folders","text":"","code":"if (FALSE) { # \\dontrun{ create_folders(param) } # }"},{"path":"https://michielvandijk.github.io/ssid/reference/create_model_template.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates ssid model template — create_model_template","title":"Creates ssid model template — create_model_template","text":"create_model_template creates folder structure template R scripts implement various steps run ssid.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/create_model_template.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates ssid model template — create_model_template","text":"","code":"create_model_template(template_path = NULL)"},{"path":"https://michielvandijk.github.io/ssid/reference/create_model_template.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates ssid model template — create_model_template","text":"template_path folder template scripts copied.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/create_model_template.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates ssid model template — create_model_template","text":"create_model template() creates several folders template_path, set user. folders contain template R scripts implement ssid. run template scripts, copied RStudio project. recommend create project first use create_model_template() add scripts RStudio project. Note create_model_template() copies script files exist yet. way, user accidentally replace already modified scripts.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/create_model_template.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates ssid model template — create_model_template","text":"","code":"if (FALSE) { # \\dontrun{ create_model_template(\"c:/temp\") } # }"},{"path":"https://michielvandijk.github.io/ssid/reference/extract_output.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract weights and diagnostics from spatial simulation object — extract_output","title":"Extract weights and diagnostics from spatial simulation object — extract_output","text":"Extract weights diagnostics spatial simulation object","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/extract_output.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract weights and diagnostics from spatial simulation object — extract_output","text":"","code":"extract_output(df, var)"},{"path":"https://michielvandijk.github.io/ssid/reference/extract_output.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract weights and diagnostics from spatial simulation object — extract_output","text":"df Object spatial simulation results nested ssp-year region. var Type output needs extracted. Options : stats, weight_tbl, primary_comp, secondary_comp","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/extract_weight_plots.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract figures with with weight distribution — extract_weight_plots","title":"Extract figures with with weight distribution — extract_weight_plots","text":"Extract figures weight distribution","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/extract_weight_plots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract figures with with weight distribution — extract_weight_plots","text":"","code":"extract_weight_plots(sim, ssp_y, reg_tz)"},{"path":"https://michielvandijk.github.io/ssid/reference/extract_weight_plots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract figures with with weight distribution — extract_weight_plots","text":"sim Object spatial simulation results. ssp_y Vector ssp-year combinations simulation results stored sim. reg_tz Vector regions simulation results stored sim.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_iqr.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to fix outliers using interquartile range — fix_outlier_iqr","title":"Function to fix outliers using interquartile range — fix_outlier_iqr","text":"function uses interquartile range determine outliers replace median value based interquartile range.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_iqr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to fix outliers using interquartile range — fix_outlier_iqr","text":"","code":"fix_outlier_iqr(x, r = \"m\", f = 1.5, d = \"ul\")"},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_iqr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to fix outliers using interquartile range — fix_outlier_iqr","text":"x Vector data containing outliers r Values replace outliers. Either m median (default) q 0.25 quantile range - f * IQR (lower) /0.75 quantile range + f * IQR (upper). f factor determine outliers. Default 1.5. Outliers measured values f * IQR .25 .75 quantile range, respectively. d Direction outliers replaced. u upper values, l lower values, ul .","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_iqr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to fix outliers using interquartile range — fix_outlier_iqr","text":"","code":"fix_outlier_iqr(rnorm(40, mean = 0, sd = 1)) #>  [1] -1.400043517  0.255317055 -2.437263611 -0.005571287  0.621552721 #>  [6]  1.148411606 -1.821817661 -0.247325302 -0.244199607 -0.282705449 #> [11] -0.553699384  0.628982042  2.065024895 -1.630989402  0.512426950 #> [16] -1.863011492 -0.522012515 -0.052601910  0.542996343 -0.914074827 #> [21]  0.468154420  0.362951256 -1.304543545  0.737776321  1.888504929 #> [26] -0.097445104 -0.935847354 -0.015950311 -0.826788954 -1.512399651 #> [31]  0.935363190  0.176488611  0.243685465  1.623548883  0.112038083 #> [36] -0.133997013 -1.910087468 -0.279237242 -0.313445978  1.067307879"},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_quantile.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to fix outliers using quantile approach — fix_outlier_quantile","title":"Function to fix outliers using quantile approach — fix_outlier_quantile","text":"function uses quantiles determine outliers replace median value.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_quantile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to fix outliers using quantile approach — fix_outlier_quantile","text":"","code":"fix_outlier_quantile(x, q_lower = 0.025, q_upper = 0.975, d = \"ul\")"},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_quantile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to fix outliers using quantile approach — fix_outlier_quantile","text":"x Vector data containing outliers q_lower Lower quantile range. Default 0.025. q_upper Upper quantile range. Default 0.975. d Direction outliers replaced. u upper values, l lower values, ul .","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/fix_outlier_quantile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to fix outliers using quantile approach — fix_outlier_quantile","text":"","code":"fix_outlier_quantile(rnorm(40, mean = 0, sd = 1), d = \"ul\") #>  [1]  0.07003485 -0.63912332 -0.04996490 -0.25148344  0.44479712  0.09411486 #>  [7]  0.04653138  0.57770907  0.11819487 -1.91172049  0.86208648 -0.24323674 #> [13] -0.20608719  0.01917759  0.02956075  0.54982754  0.09411486  2.68255718 #> [19] -0.36122126  0.21335575  1.07434588 -0.66508825  1.11395242 -0.24589641 #> [25] -1.17756331 -0.97585062  1.06505732  0.13167063  0.48862881 -1.69945057 #> [31] -1.47073631  0.28415034  1.33732041  0.23669628  1.31829338  0.52390979 #> [37]  0.60674805 -0.10993567  0.17218172 -0.09032729"},{"path":"https://michielvandijk.github.io/ssid/reference/ipf_seed.html","id":null,"dir":"Reference","previous_headings":"","what":"ipf_seed — ipf_seed","title":"ipf_seed — ipf_seed","text":"ipf_seed","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipf_seed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"ipf_seed — ipf_seed","text":"","code":"ipf_seed(   reg_tz,   hh_s,   per_s,   bm,   p,   reg_sample = FALSE,   verbose = FALSE,   max_iter = 300,   max_ratio = 5,   min_ratio = 0.2,   relative_gap = 0.01,   absolute_diff = 10 )"},{"path":"https://michielvandijk.github.io/ssid/reference/ipf_seed.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"ipf_seed — ipf_seed","text":"absolute_diff","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu2.html","id":null,"dir":"Reference","previous_headings":"","what":"Iterative Proportional Updating — ipu2","title":"Iterative Proportional Updating — ipu2","text":"general case iterative proportional fitting. can satisfy two, disparate sets marginals agree single total. common example balancing population data using household- person-level marginal controls. survey expansion synthetic population creation. second set marginal/seed data optional, meaning can also used basic IPF tasks. function provided ipfr package updated output also includes information weather algorithm converged.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Iterative Proportional Updating — ipu2","text":"","code":"ipu2(   primary_seed,   primary_targets,   secondary_seed = NULL,   secondary_targets = NULL,   primary_id = \"id\",   secondary_importance = 1,   relative_gap = 0.01,   max_iterations = 100,   absolute_diff = 10,   weight_floor = 1e-05,   verbose = FALSE,   max_ratio = 10000,   min_ratio = 1e-04 )"},{"path":"https://michielvandijk.github.io/ssid/reference/ipu2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Iterative Proportional Updating — ipu2","text":"primary_seed population synthesis household survey expansion, household seed table (record represent household). also trip table, row represents origin-destination pair. primary_targets named list data frames.  name list defines marginal dimension must match column primary_seed table. data frame associated named list element can contain geography field (starting \"geo_\"). , row target table defines new geography (TAZs, tracts, clusters, etc.). column names define marginal categories targets provided . vignette provides detail. secondary_seed commonly, primary_seed describes households, secondary seed table describe persons household. Must contain primary_id column links person respective household primary_seed. secondary_targets format primary_targets, constrain secondary_seed table. primary_id field used join primary secondary seed tables. necessary secondary_seed provided. secondary_importance real 0 1 signifying importance secondary targets. importance 1, function try match secondary targets exactly. 0, percentage distributions used (see vignette section \"Target Agreement\".) relative_gap iteration, weights compared previous weights %RMSE calculated. %RMSE less relative_gap threshold, process terminates. max_iterations maximum number iterations perform, even relative_gap reached. absolute_diff Upon completion, ipu() function report worst-performing marginal category geography based percent difference target. absolute_diff threshold percent differences matter. example, target value 2, expanded weights equaled 1, 100% difference, important absolute value 1. Defaults 10. weight_floor Minimum weight allow cell prevent zero weights. Set .0001 default.  arbitrarily small compared seed table weights. verbose Print iteration details worst marginal stats upon completion? Default FALSE. max_ratio real number. average weight per seed record calculated dividing total targets number records. max_scale caps maximum weight multiple average. Defaults 10000 (basically turned ). min_ratio real number. average weight per seed record calculated dividing total targets number records. min_scale caps minimum weight multiple average. Defaults 0.0001 (basically turned ).","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Iterative Proportional Updating — ipu2","text":"named list primary_seed weight, histogram weight distribution, two comparison tables aid reporting.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu2.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Iterative Proportional Updating — ipu2","text":"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.537.723&rep=rep1&type=pdf","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Iterative Proportional Updating — ipu2","text":"","code":"hh_seed <- dplyr::tibble(   id = c(1, 2, 3, 4),   siz = c(1, 2, 2, 1),   weight = c(1, 1, 1, 1),   geo_cluster = c(1, 1, 2, 2) )  hh_targets <- list() hh_targets$siz <- dplyr::tibble(   geo_cluster = c(1, 2),   `1` = c(75, 100),   `2` = c(25, 150) )  result <- ipu(hh_seed, hh_targets, max_iterations = 5) #> Error in ipu(hh_seed, hh_targets, max_iterations = 5): could not find function \"ipu\""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Balance a matrix given row and column targets — ipu_matrix","title":"Balance a matrix given row and column targets — ipu_matrix","text":"function simplifies call ipu() simple case matrix row/column targets.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Balance a matrix given row and column targets — ipu_matrix","text":"","code":"ipu_matrix(mtx, row_targets, column_targets, ...)"},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Balance a matrix given row and column targets — ipu_matrix","text":"mtx matrix row_targets vector targets row sums must match column_targets vector targets column sums must match ... additional arguments passed ipu(). See ipu details.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Balance a matrix given row and column targets — ipu_matrix","text":"matrix matches row column targets","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Balance a matrix given row and column targets — ipu_matrix","text":"","code":"mtx <- matrix(data = runif(9), nrow = 3, ncol = 3) row_targets <- c(3, 4, 5) column_targets <- c(5, 4, 3) ipu_matrix(mtx, row_targets, column_targets) #> Error in seed %>% dplyr::mutate(geo_all = 1, id = seq(1, n())): could not find function \"%>%\""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_subnat_proj.html","id":null,"dir":"Reference","previous_headings":"","what":"ipu_subnat_proj — ipu_subnat_proj","title":"ipu_subnat_proj — ipu_subnat_proj","text":"Function rake subnational population projections match national age-sex subnational pop projections.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_subnat_proj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"ipu_subnat_proj — ipu_subnat_proj","text":"","code":"ipu_subnat_proj(y, scen, verbose = TRUE)"},{"path":"https://michielvandijk.github.io/ssid/reference/ipu_subnat_proj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"ipu_subnat_proj — ipu_subnat_proj","text":"y Year scen Scenario verbose Print iteration details worst marginal stats upon completion generated ipfr::ipu_matrix? Default TRUE. param ssid_par","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/load_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load model input data for further processing — load_data","title":"Load model input data for further processing — load_data","text":"load_data() can used quickly load input data (e.g. subnational statistics, maps mappings). can useful quickly inspect statistics visualize map. Data can loaded data created running pre-processing steps. See details allowed input.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/load_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load model input data for further processing — load_data","text":"","code":"load_data(data, param, local = FALSE, mess = TRUE)"},{"path":"https://michielvandijk.github.io/ssid/reference/load_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load model input data for further processing — load_data","text":"data character vector refers data loaded. See details allowed input. local logical; data loaded global (TRUE) local environment (`FALSE). Loading data local environment relevant function used internal package functions. mess logical; message printed screen indicates dataset loaded?","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/load_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load model input data for further processing — load_data","text":"following inputs allowed: adm_list: adm_map: adm_map_r: cl_mean: cl_max: cl_rank: ia_max: ia_rank: gaez2crop: gaez_replace: grid: gia: gmia: pop: acc: urb: simu: simu_r: ha: fs: ci: price: dm2fm: crop2globiom: faostat2crop: results:","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/load_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load model input data for further processing — load_data","text":"","code":"load_data(c(\"ha\", \"adm_map\"), param) #> Error: object 'param' not found"},{"path":"https://michielvandijk.github.io/ssid/reference/prepare_benchmark.html","id":null,"dir":"Reference","previous_headings":"","what":"Title — prepare_benchmark","title":"Title — prepare_benchmark","text":"Title","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/prepare_benchmark.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Title — prepare_benchmark","text":"","code":"prepare_benchmark(hh, u_r, a_s, oc)"},{"path":"https://michielvandijk.github.io/ssid/reference/prepare_benchmark.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Title — prepare_benchmark","text":"oc occupation data","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/process_seed_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to process a seed table — process_seed_table","title":"Helper function to process a seed table — process_seed_table","text":"Helper ipu(). Strips columns seed table except primary id marginal column (reflected targets tables). Also identifies factor columns one level processes mlr::createDummyFeatures() called.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/process_seed_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to process a seed table — process_seed_table","text":"","code":"process_seed_table(df, primary_id, marginal_columns)"},{"path":"https://michielvandijk.github.io/ssid/reference/process_seed_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to process a seed table — process_seed_table","text":"df data.frame processed ipu() function called. primary_id name primary ID column. marginal_columns vector column names seed table matching targets.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/reweigh.html","id":null,"dir":"Reference","previous_headings":"","what":"Title — reweigh","title":"Title — reweigh","text":"Title","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/reweigh.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Title — reweigh","text":"","code":"reweigh(   ssp_y,   reg_tz,   hh_s,   per_s,   bm,   param,   reg_sample = FALSE,   verbose = FALSE,   max_iter = 300,   max_ratio = 5,   min_ratio = 0.2,   relative_gap = 0.01,   absolute_diff = 10,   parallel = TRUE,   output = NULL )"},{"path":"https://michielvandijk.github.io/ssid/reference/reweigh.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Title — reweigh","text":"parallel TRUE (default), reweighing algorithm run parallel regions. Otherwise, sequential option used (cases takes much longer. output folder save output ssp-year combination specified ssp_y. default (NULL) save output.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/scale_targets.html","id":null,"dir":"Reference","previous_headings":"","what":"Scale targets to ensure consistency — scale_targets","title":"Scale targets to ensure consistency — scale_targets","text":"Often, different marginals may disagree total number units. context household survey expansion, example, one marginal might say 100k households another says 101k. function solves problem scaling target tables match first target table provided.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/scale_targets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scale targets to ensure consistency — scale_targets","text":"","code":"scale_targets(targets, verbose = FALSE)"},{"path":"https://michielvandijk.github.io/ssid/reference/scale_targets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scale targets to ensure consistency — scale_targets","text":"targets named list data.frames format required ipu. verbose logical Show warning target scaled? Defaults FALSE.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/scale_targets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scale targets to ensure consistency — scale_targets","text":"named list scaled targets","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ssid-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ssid: Spatial Simulation of Income Dynamics model — ssid-package","title":"ssid: Spatial Simulation of Income Dynamics model — ssid-package","text":"package contains functions run dynamic spatial microsimulation model provides income poverty projections subnational scale. uses spatial microsimulation approach, derive indicators fine spatial resolution (e.g. districts municipalities) combining socio-economic data household survey (referred 'seed'), aggregated information population characteristics (referred 'benchmark') available small geographical areas population census sources. algorithm used reweigh seed match benchmark information derive representative small area statistics, case income poverty indicators. dynamic spatial microsimulation approaches, benchmark projected forward new weights computed future periods obtain trends income distribution different scenarios.","code":""},{"path":[]},{"path":"https://michielvandijk.github.io/ssid/reference/ssid-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ssid: Spatial Simulation of Income Dynamics model — ssid-package","text":"Maintainer: Michiel Van Dijk michiel.vandijk@wur.nl (ORCID)","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ssid_par.html","id":null,"dir":"Reference","previous_headings":"","what":"Sets ssid parameters — ssid_par","title":"Sets ssid parameters — ssid_par","text":"ssid_par sets required parameters run ssid, including core model folders, country code year.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ssid_par.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sets ssid parameters — ssid_par","text":"","code":"ssid_par(   model_path = NULL,   db_path = NULL,   iso3c = NULL,   adm_level = NULL,   micro_year = NULL,   start_year = NULL,   end_year = NULL )"},{"path":"https://michielvandijk.github.io/ssid/reference/ssid_par.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sets ssid parameters — ssid_par","text":"model_path character. Folder model files stored. Note R uses forward slash double backslash separate folder names. db_path character. Folder input database stored. iso3c character. Three letter ISO 3166-1 alpha-3 country code, also referred iso3c. list country codes can found Wikipedia. adm_level numeric. Administrative unit level model run. needs correspond information shapefile administrative units, needed input. micro_year numeric. Year micro data (household survey) available. start_year numeric. Start year simulation period. end_year numeric. End year simulation period.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ssid_par.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sets ssid parameters — ssid_par","text":"ssid_par object","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ssid_par.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sets ssid parameters — ssid_par","text":"ssid_par creates object class ssid_par, bundles required ssid parameters set user: model database folder, three digit country code, country name continent. coordinate reference system automatically set WGS84 (epsg:4326). countrycode::countrycode() used determine full country name, three digit country code continent basis alpha-3 country code. information required extract country specific information several datasets.","code":""},{"path":"https://michielvandijk.github.io/ssid/reference/ssid_par.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sets ssid parameters — ssid_par","text":"","code":"if (FALSE) { # \\dontrun{ ssid_par(model_path = \"C:/temp/ssid_eth\", db_path = \"C:/temp/ssid_db\", iso3c = \"ETH\", adm_level = 2, micro_year = 2018, proj_year = 2021, start_year = 2018, end_year = 2050) } # }"},{"path":"https://michielvandijk.github.io/ssid/news/index.html","id":"ssid-0009000","dir":"Changelog","previous_headings":"","what":"ssid 0.0.0.9000","title":"ssid 0.0.0.9000","text":"Added NEWS.md file track changes package.","code":""}]
